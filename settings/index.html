

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Settings reference &mdash; Tumpara  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="Quick start" href="../guide/quickstart/" />
    <link rel="prev" title="Setup and basic usage" href="../setup/" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../" class="icon icon-home"> Tumpara
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../setup/">Setup and basic usage</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Settings reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#core-settings">Core settings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#secret-key">Secret key</a></li>
<li class="toctree-l3"><a class="reference internal" href="#database-setup">Database setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#application-hostname">Application hostname</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-directory">Data directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="#logging">Logging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#application-settings">Application settings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#blurhash-sizes">Blurhash sizes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reporting-interval">Reporting interval</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#docker-specific-settings">Docker-specific settings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#additional-user-groups">Additional user groups</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Usage guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../guide/quickstart/">Quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/api/">Connecting to the API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/libraries/">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/timeline/">Timeline</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/storage/">Storage system</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">Tumpara</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../" class="icon icon-home"></a> &raquo;</li>
        
      <li>Settings reference</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/settings.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="settings-reference">
<span id="settings"></span><h1>Settings reference<a class="headerlink" href="#settings-reference" title="Permalink to this headline">¶</a></h1>
<p>Tumpara is configured using a Python file which is loaded on startup. All of
the <a class="reference external" href="https://docs.djangoproject.com/en/3.2/ref/settings/">Django settings</a> will work as expected – a few of the most
relevant ones are also listed below for completeness’ sake. See the
documentation linked above for a more complete list. On top of the
Django-provided settings, there are a few which are unique to Tumpara. This
page aims to provide a complete reference of all the knobs you can tweak to
configure your installation.</p>
<p>Some of the more common settings (and all of the Tumpara-specific ones) are also
available to be configured using environment variables. That way you don’t need
to create a configuration file and only tweak a few options. This also makes
Docker-based deployments easier. But if you do want to create your own
configuration file, this is a good start:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;TUMPARA_SECRET_KEY&quot;</span><span class="p">,</span> <span class="s2">&quot;changeme&quot;</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">tumpara.settings.production</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">ALLOWED_HOSTS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span> <span class="s2">&quot;tumpara.example.com&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>In order for your custom configuration to be loaded, you need to set the
<code class="docutils literal notranslate"><span class="pre">DJANGO_SETTINGS_MODULE</span></code> environment variable, while also making sure that
the file is found. The easiest way to do that is to name the settings file
<code class="docutils literal notranslate"><span class="pre">local_settings.py</span></code> and put it in the working directory where you start the
server. Then, set the aforementioned variable to <code class="docutils literal notranslate"><span class="pre">local_settings</span></code>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ <span class="nv">DJANGO_SETTINGS_MODULE</span><span class="o">=</span>local_settings ./manage.py
or
$ <span class="nv">DJANGO_SETTINGS_MODULE</span><span class="o">=</span>local_settings gunicorn tumpara.wsgi
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For regular deployments, you shouldn’t need to create your own custom Django
settings file. Check if you can use environment variables first, then create
a settings file if that doesn’t cover your needs.</p>
</div>
<div class="section" id="core-settings">
<h2>Core settings<a class="headerlink" href="#core-settings" title="Permalink to this headline">¶</a></h2>
<p>This section contains core settings required for the application to run. With
the exception of <code class="docutils literal notranslate"><span class="pre">SECRET_KEY</span></code>, these are all defined by the default
configuration.</p>
<div class="section" id="secret-key">
<h3>Secret key<a class="headerlink" href="#secret-key" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line"><em>Environment variable: TUMPARA_SECRET_KEY</em></div>
<div class="line"><em>Django setting: SECRET_KEY</em></div>
</div>
<p>This is the only setting you <em>need</em> to define. This key is used everywhere where
encryption or cryptographic signing is required, for example with user sessions.</p>
<p>It should be a string. Use a command like <code class="docutils literal notranslate"><span class="pre">openssl</span> <span class="pre">rand</span> <span class="pre">-base64</span> <span class="pre">32</span></code> to
generate a secure key for you.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure this value is kept secret!</p>
<p>As a minimum, run <code class="docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">go-rwx</span> <span class="pre">local_settings.py</span></code> on your configuration
file. Further, the web server should always be running as it’s own user for
production instances.</p>
</div>
</div>
<div class="section" id="database-setup">
<h3>Database setup<a class="headerlink" href="#database-setup" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line"><em>Django setting: DATABASES</em></div>
</div>
<p>Use this to configure the database that Tumpara will use. See
<a class="reference external" href="https://docs.djangoproject.com/en/3.2/ref/settings/#databases">Django’s documentation</a> on this key for the exact syntax. Just make sure it’s
a database type that is <a class="reference external" href="https://docs.djangoproject.com/en/3.2/ref/contrib/gis/db-api/#spatial-backends">supported</a> by GeoDjango.</p>
<p>Default: an SQLite database named <code class="docutils literal notranslate"><span class="pre">db.sqlite3</span></code> in the project’s root folder.</p>
</div>
<div class="section" id="application-hostname">
<span id="settings-allowed-hosts"></span><h3>Application hostname<a class="headerlink" href="#application-hostname" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line"><em>Environment variable: TUMPARA_HOST (only supports a single hostname)</em></div>
<div class="line"><em>Django setting: ALLOWED_HOSTS</em></div>
</div>
<p>Set this to the list of all hosts that are allowed to serve your instance of
Tumpara. If you would like it to be reachable from both the server’s IP address
as well as a domain name, add them here. For example, your configuration could
look like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ALLOWED_HOSTS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span> <span class="s2">&quot;192.168.1.50&quot;</span><span class="p">,</span> <span class="s2">&quot;tumpara.example.org&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>This will help mitigating Host-header attacks. See documentation on
<a class="reference external" href="https://docs.djangoproject.com/en/3.2/ref/settings/#allowed-hosts">djangoproject.com</a> for more details on what this option does.</p>
<p>Default: no hosts are allowed.</p>
</div>
<div class="section" id="data-directory">
<h3>Data directory<a class="headerlink" href="#data-directory" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line"><em>Environment variable: TUMPARA_DATA_ROOT</em></div>
<div class="line"><em>Django setting: DATA_ROOT</em></div>
</div>
<p>The directory to use for storing application data. If you use the default
SQLite-based database, it will be placed in this folder. Other things like the
preview (thumbnail) cache also go here.</p>
<p>Default: the subdirectory <code class="docutils literal notranslate"><span class="pre">data/</span></code> under the project’s root folder, or
<code class="docutils literal notranslate"><span class="pre">/data</span></code> when running in Docker.</p>
</div>
<div class="section" id="logging">
<h3>Logging<a class="headerlink" href="#logging" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line"><em>Environment variable: LOG_LEVEL</em></div>
<div class="line"><em>Django setting: LOGGING</em></div>
</div>
<p>See <a class="reference external" href="https://docs.djangoproject.com/en/3.2/ref/settings/#logging">Django’s reference</a> on this entry’s format. The default setup should suit
most needs here, but you can use the environment variable above to globally
adjust how verbose the app is. It should be set to one of the following values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DEBUG</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INFO</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WARNING</span></code></p></li>
</ul>
</div>
</div>
<div class="section" id="application-settings">
<h2>Application settings<a class="headerlink" href="#application-settings" title="Permalink to this headline">¶</a></h2>
<p>Settings in this section control how the app behaves and what defaults are
applied in certain contexts.</p>
<div class="section" id="blurhash-sizes">
<h3>Blurhash sizes<a class="headerlink" href="#blurhash-sizes" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line"><em>Environment variable: TUMPARA_BLURHASH_SIZE</em></div>
<div class="line"><em>Django setting: BLURHASH_SIZE</em></div>
</div>
<p>Tumpara supports generating <a class="reference external" href="https://blurha.sh/">blurhashes</a> from photos, which are small textual
representations of images. These can be used by to render a blurred version of
the image while the full-scale version is still loading. This setting sets the
approximate number of components hashes should have. Lower values will result
in results which are smaller but also have less details.</p>
<p>Default: <code class="docutils literal notranslate"><span class="pre">12</span></code></p>
</div>
<div class="section" id="reporting-interval">
<h3>Reporting interval<a class="headerlink" href="#reporting-interval" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line"><em>Environment variable: TUMPARA_REPORT_INTERVAL</em></div>
<div class="line"><em>Django setting: REPORT_INTERVAL</em></div>
</div>
<p>When performing long-running tasks like scanning, this is the interval between
items where progress is reported. If you have smaller (or larger) than average
libraries, you might want to tweak this value.</p>
<p>Default: <code class="docutils literal notranslate"><span class="pre">500</span></code></p>
</div>
</div>
<div class="section" id="docker-specific-settings">
<h2>Docker-specific settings<a class="headerlink" href="#docker-specific-settings" title="Permalink to this headline">¶</a></h2>
<p>Settings in this section are only relevant to Docker-based deployments and are
interpreted by the container’s entrypoint script.</p>
<div class="section" id="additional-user-groups">
<h3>Additional user groups<a class="headerlink" href="#additional-user-groups" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line"><em>Environment variable: TUMPARA_EXTRA_GROUPS</em></div>
</div>
<p>If your media libraries aren’t publicly readable because of filesystem
permissions, you can set this variable to a space-separated list of group IDs
that the container’s user will be added to. Find out your user’s groups with
<code class="docutils literal notranslate"><span class="pre">id</span></code> and add the necessary ones to this list. The account that runs Tumpara in
the container will receive the additional groups on startup. For example, if
your receive this output…</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ id
<span class="nv">uid</span><span class="o">=</span><span class="m">1000</span><span class="o">(</span>myuser<span class="o">)</span> <span class="nv">gid</span><span class="o">=</span><span class="m">1000</span><span class="o">(</span>myuser<span class="o">)</span> <span class="nv">Groups</span><span class="o">=</span><span class="m">1000</span><span class="o">(</span>myuser<span class="o">)</span>,985<span class="o">(</span>users<span class="o">)</span>
</pre></div>
</div>
<p>… you would set <code class="docutils literal notranslate"><span class="pre">TUMPARA_EXTRA_GROUPS=985</span></code> if the corresponding media
directories are owned by the <code class="docutils literal notranslate"><span class="pre">users</span></code> group.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../guide/quickstart/" class="btn btn-neutral float-right" title="Quick start" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../setup/" class="btn btn-neutral float-left" title="Setup and basic usage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Yannik Rödel.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>